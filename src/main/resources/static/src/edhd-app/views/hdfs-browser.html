<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../bower_components/vaadin-grid/vaadin-grid.html">
<link rel="import" href="../../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../common-styles/common-styles.html">

<dom-module id="hdfs-browser">
    <template>
        <style include="common-styles"></style>

        <h1>HDFS Browser</h1>
        <div class="row" style="background-color: white;">
            <span class="cell">Current Location: {{location}}</span>
            <paper-icon-button class="cell" icon="refresh" on-click="refresh" style="float: right;"></paper-icon-button>
            <paper-icon-button class="cell" icon="arrow-upward" on-click="goUp" style="float: right;"></paper-icon-button>
            <paper-input id="mkdir" class="cell" label="New Folder (Hit Enter to create)" on-keyup="mkDir" style="float: right;"></paper-icon-button>
        </div>
        <vaadin-grid items="[[hdfsChildren]]">
            <vaadin-grid-column resizable>
                <template class="header">Permissions</template>
                <template>[[item.permissions]]</template>
            </vaadin-grid-column>
            <vaadin-grid-column resizable>
                <template class="header">Owner</template>
                <template>[[item.owner]]</template>
            </vaadin-grid-column>
            <vaadin-grid-column resizable>
                <template class="header">Group</template>
                <template>[[item.group]]</template>
            </vaadin-grid-column>
            <vaadin-grid-column resizable flex-grow="4">
                <template class="header">Path</template>
                <template>
                    <span on-click="handleURLSelect" style="text-decoration: underline;">
                        [[item.path]]
                    </span>
                </template>
            </vaadin-grid-column>
        </vaadin-grid>
        <iron-ajax id="requestHDFS" url="/hdfs-ls"></iron-ajax>
        <iron-ajax id="requestMkDir" url="/hdfs-mkdir" method="POST"></iron-ajax>
    </template>
    <script src="hdfs-browser.js"></script>
</dom-module>